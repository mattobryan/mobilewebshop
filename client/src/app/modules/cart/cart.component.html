<div class="cart-container">
    <h2>Your Shopping Cart</h2>
  
    <!-- Empty Cart -->
    <section class="empty-cart" *ngIf="cartItems.length === 0">
      <p>Your cart is empty.</p>
      <button routerLink="/products" class="continue-shopping-btn">Continue Shopping</button>
    </section>
  
    <!-- Cart With Items -->
    <section class="cart-content" *ngIf="cartItems.length > 0">
      <!-- Items -->
      <div class="cart-items">
        <div class="cart-item" *ngFor="let item of cartItems; trackBy: trackByProductId">
          <div class="item-image">
            <img [src]="item.imageUrl" alt="{{ item.name }}" onerror="this.src='/assets/placeholder.jpg'">
          </div>
  
          <div class="item-details">
            <h3>{{ item.name }}</h3>
            <p class="item-price">\${{ item.price.toFixed(2) }}</p>
          </div>
  
          <div class="item-quantity">
            <button (click)="decreaseQuantity(item)" class="quantity-btn" aria-label="Decrease Quantity">-</button>
            <input type="number" [value]="item.quantity" min="1" (change)="updateQuantity(item, $event)" />
            <button (click)="increaseQuantity(item)" class="quantity-btn" aria-label="Increase Quantity">+</button>
          </div>
  
          <div class="item-total">
            \${{ (item.price * item.quantity).toFixed(2) }}
          </div>
  
          <button (click)="removeItem(item.productId)" class="remove-btn" aria-label="Remove Item">
            <span class="remove-icon">Ã—</span>
          </button>
        </div>
      </div>
  
      <!-- Summary -->
      <aside class="cart-summary">
        <h3>Order Summary</h3>
        <div class="summary-row"><span>Subtotal:</span><span>\${{ cartTotal.toFixed(2) }}</span></div>
        <div class="summary-row"><span>Shipping:</span><span>Free</span></div>
        <div class="summary-row total"><span>Total:</span><span>\${{ cartTotal.toFixed(2) }}</span></div>
  
        <button class="checkout-btn" (click)="checkout()" [disabled]="isSubmitting">Proceed to Checkout</button>
        <button class="clear-cart-btn" (click)="clearCart()">Clear Cart</button>
        <button class="continue-shopping-btn" routerLink="/products">Continue Shopping</button>
      </aside>
    </section>
  </div>
  
  <!-- Checkout Form -->
  <section class="checkout-form" *ngIf="showCheckoutForm && cartItems.length > 0">
    <h3>Shipping Information</h3>
    <form (ngSubmit)="placeOrder()" novalidate>
      <div class="form-group">
        <label for="street">Street Address</label>
        <input type="text" id="street" name="street" [(ngModel)]="shippingAddress.street" required />
      </div>
  
      <div class="form-row">
        <div class="form-group">
          <label for="city">City</label>
          <input type="text" id="city" name="city" [(ngModel)]="shippingAddress.city" required />
        </div>
        <div class="form-group">
          <label for="state">State/Province</label>
          <input type="text" id="state" name="state" [(ngModel)]="shippingAddress.state" required />
        </div>
      </div>
  
      <div class="form-row">
        <div class="form-group">
          <label for="postalCode">Postal Code</label>
          <input type="text" id="postalCode" name="postalCode" [(ngModel)]="shippingAddress.postalCode" required />
        </div>
        <div class="form-group">
          <label for="country">Country</label>
          <input type="text" id="country" name="country" [(ngModel)]="shippingAddress.country" required />
        </div>
      </div>
  
      <h3>Payment Method</h3>
      <div class="payment-methods">
        <div class="payment-method">
          <input type="radio" id="credit_card" name="paymentMethod" value="credit_card" [(ngModel)]="paymentMethod" />
          <label for="credit_card">Credit Card</label>
        </div>
        <div class="payment-method">
          <input type="radio" id="paypal" name="paymentMethod" value="paypal" [(ngModel)]="paymentMethod" />
          <label for="paypal">PayPal</label>
        </div>
        <div class="payment-method">
          <input type="radio" id="stripe" name="paymentMethod" value="stripe" [(ngModel)]="paymentMethod" />
          <label for="stripe">Stripe</label>
        </div>
      </div>
  
      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="showCheckoutForm = false">Cancel</button>
        <button type="submit" class="place-order-btn" [disabled]="isSubmitting">
          {{ isSubmitting ? 'Processing...' : 'Place Order' }}
        </button>
      </div>
    </form>
  </section>
  
  <!-- Error Message -->
  <div class="error-container" *ngIf="error">
    <div class="error-message">{{ error }}</div>
  </div>
  